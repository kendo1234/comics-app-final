{% extends "base.html" %} {% block content %}
<div class="search-form">
  <form
    method="GET"
    action="{{ url_for('search') }}"
    style="display: flex; gap: 1rem; width: 100%"
  >
    <div class="form-group" style="flex: 1; margin-bottom: 0">
      <label for="search">Search Comics:</label>
      <input
        type="search"
        id="search"
        name="q"
        placeholder="Search by title, writer, or artist..."
        value="{{ search_query or '' }}"
      />
    </div>
    <div style="align-self: end">
      <button type="submit" class="btn">Search</button>
      {% if search_query %}
      <a href="{{ url_for('index') }}" class="btn" style="background: #95a5a6"
        >Clear</a
      >
      {% endif %}
    </div>
  </form>
</div>

{% if search_query %}
<h2>Search Results for "{{ search_query }}" ({{ comics|length }} found)</h2>
{% else %}
<h2>All Comics ({{ comics|length }} total)</h2>
{% endif %} {% if comics %}
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Volume</th>
      <th>Writer</th>
      <th>Artist</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for comic in comics %}
    <tr>
      <td><strong>{{ comic.title }}</strong></td>
      <td>{{ comic.volume }}</td>
      <td>{{ comic.writer }}</td>
      <td>{{ comic.artist }}</td>
      <td>
        <div class="actions">
          <a href="{{ url_for('edit_comic', comic_id=comic.id) }}" class="btn"
            >Edit</a
          >
          <a
            href="{{ url_for('delete_comic', comic_id=comic.id) }}"
            class="btn btn-danger"
            onclick="
              return confirm('Are you sure you want to delete this comic?');
            "
            >Delete</a
          >
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="card">
  {% if search_query %}
  <p>
    No comics found matching "{{ search_query }}".
    <a href="{{ url_for('index') }}">View all comics</a>
  </p>
  {% else %}
  <p>
    No comics in your collection yet.
    <a href="{{ url_for('add_comic') }}">Add your first comic!</a>
  </p>
  {% endif %}
</div>
{% endif %}

<div style="margin-top: 2rem; text-align: center">
  <a href="{{ url_for('add_comic') }}" class="btn btn-success">Add New Comic</a>
  <a
    href="{{ url_for('add_multiple_comics') }}"
    class="btn"
    style="background: #27ae60"
    >Add Multiple Comics</a
  >
  <a href="{{ url_for('export_csv') }}" class="btn">Export to CSV</a>
</div>
{% endblock %}
